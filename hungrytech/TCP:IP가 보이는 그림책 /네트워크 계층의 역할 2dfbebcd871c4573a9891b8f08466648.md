# 네트워크 계층의 역할

생성일: September 11, 2021 9:42 AM

# 네트워크 계층

- Ip, ICMP로 이루어져 있다.
- 네트워크 계층은 하나의 프로토콜만 가지고있으니 통신방법의 차이의 완충역할을 해준다.
- 통신 상대를 지정 (네트워크상에 존재하는 모든기기에는 고유의 주소 같은 것이 할당 되어 있다.)
- 목적지까지의 경로를 결정

### 데이터 링크 계층에 전달

- 트렌스포트 계층으로부터 데이터를 받아서 목적지를 특정하는 번호(IP주소)등을 기록한 IP 헤더를 붙여서 데이터 링크측에 전달합니다. 데이터에 IP헤더를 붙인것 → IP 데이터그램이라고 한다.
    - 데이터 링크 계층에서 다룰 수 있는 크기 보다 클 때는 분할한 후 헤더를 붙인다.

### Best Effort 방식으로 데이터 전송

노력은하지만 결과는 보장하지 않는다.

- 헤더가 깨지지 않았는지 확인하거나 목적지의 주소가 존재하는지 아닌지 정도의 판단처리는 함.
- 그러나, 재전송 처리는 수행하지 않는다.

### 최적의 경로로 보내기

목적지까지의 경로나 통신 상태를 보고 가장 빨리 목적지에 전달하려면 어떤 경로가 좋은지를 판단해서 보내는 기능이 있다.

### 트랜스포트 계층에 전달

수신측에서는 IP헤더에 쓰여진 목적지의 주소를 확인하고 자기 앞으로 온것만 받는다

트랜스포트 계츠으이 지정된 프로토콜에 전달한다.

### IP 주소와 IPv4

IPv4 32비트 IPv6 128비트

- 네트워크부와 호스트부로 나누어져 있다.
    - 네트워크부 → 네트워크 고유의 번호가 들어감.
    - 호스트부 → 각각의 컴퓨터를 나타내는 번호가 들어감. (기본적으로 자유롭게 할당)
    - 같은 네트워크 내라면 네트워크부는 똑같다.
    

라우터는 접속되어 있는 네트워크의 수만큼 IP주소를 갖고 있다.

### 네트워크부와 호스트부의 경계

IP주소만으로는 네트워크부와 호스트부의 경계를 알 수 없다. 그래서 서브넷 마스크(또는 넷마스크)라는 값을 사용하여 경계를 나타낸다.

네트워크부에 대응하는 비트를 1로 만들면

인반적으로 IP주소 서브넷 마스크

예) 192.168.15.10 → 255.255.0.0

192.168.15.10/16 → IP주소 다음에 슬래쉬와 네트워크부의 비트 수를 씁니다.

## IP 주소 (IPv6)

IPv4로 나타낼 수 있는 IP주소는 약 43억 개이다.

인터넷 보급으로 인해 부족해지게 되었고 그것에 대한 해결책 IPv6이고 128비트로 이루어져 있다. 340조.

### 표기방법의 차이

- IPv4 10진법
- IPv6 16진법

IPv6 는 16비트마다 :(콜론)으로 구분한다.

0000:0000:0000:0000:0000:0000:0000:0000에서 ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff까지

## 라우터

라우터의 역할 = 네트워크 계층의 역할

네트워크간을 연결해서 패킷이 목적지에 전달될 때까지 길 안내를 하는 기기

- 송신측을 시작으로 여러개의 라우터를 거쳐서 수신측으로 전달된다.
    - 통신세계에서는 컴퓨터 사이의 거리를 통과한 라우터의 개수로 나타내는데 이때 사용하는 단위를 홉(hop)이라고 한다.

## 네트워크 계층의 신뢰성 (ICMP, ICMPv6)

신뢰성이 떨어지는 ICMP라는 프로토콜이 있다.

ICMP(Internet Control Message Protocol) 

- IP는 받았는지 확인하지 않는다. 따라서 이것을 도와주는 ICMP가 있다.

## IP 주소의 설정

필요할때만 자동으로 IP주소를 할당하는 프로토콜 DHCP(Dynamic Host Configure ation Protocol)

DHCP 클라이언트는 요청을 할 때 수신 IP주소를 255.255.255.255로 만든다. (IPv4) 

[IPv6로 자동할 당 시 DHCPv6를 사용]

- 이것을 **브로드캐스트 주소**라고 하며 동일한 LAN안의 모든기기에 송신하기 위한 특수한 IP 주소
- 이 요청에 대해서는 DHCP 서버만 응답한다.

## 서브넷

- 서브넷은 네트워크 내에서만 정한 규칙
- 서브넷을 만드려면 서브넷 마스크를 사용한다.
    
    예) 127.15.4.0 ~ 127.15.4.255/24 ← 뒷부분을 늘림
    

## IP주소와 도메인

IP주소와 도메인명을 처리하는 서비스를 DNS(Domain Name System)라고 한다.

예) 클라이언트 → 지역네임서버(지역 DNS 서버) www.naver.com을 주세요 → 195.24.xx.x 전달  

클라이언트와 직접 주고받기를 하는 것은 지역 네임 서버이다. 방대한 IP주소를 한대의 기기로 관리할 수 없으므로 여러개의 지역네임 서버와 연계하여 서비스 제공.

### IP주소를 알려면

지역 네임 서버는 자신의 대응표의 없는 도메인을 물어보면 DNS를 총괄하는 루트 서버에게 조회한다.

### ping 명령

- 특정 컴퓨터가 네트워크상에 존재하고 있는지 조사
- ICMP 메세지를 송신하여 알아냄